# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ AI Mediator

## –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –∫–∞–∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –æ–±—â–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏. –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∏ –¥–µ–ø–ª–æ–∏—Ç—å—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.

## –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

### üèóÔ∏è –ö–æ—Ä–Ω–µ–≤—ã–µ —Ñ–∞–π–ª—ã
```
‚îú‚îÄ .github/workflows/     # CI/CD –ø–∞–π–ø–ª–∞–π–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
‚îú‚îÄ .gitignore            # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Git
‚îú‚îÄ .dockerignore         # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Docker
‚îú‚îÄ .env.example          # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ README.md             # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ docker-compose.yml    # –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
‚îú‚îÄ Makefile             # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á
```

### üì¶ –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (`shared/`)
```
shared/
‚îú‚îÄ prompts/              # –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞–º–∏
‚îÇ  ‚îú‚îÄ current/          # –ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã
‚îÇ  ‚îú‚îÄ experiments/      # –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
‚îÇ  ‚îî‚îÄ tests/           # –¢–µ—Å—Ç–æ–≤—ã–µ –∫–µ–π—Å—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
‚îú‚îÄ contracts/           # API –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ —Å—Ö–µ–º—ã
‚îú‚îÄ database/           # –ú–æ–¥–µ–ª–∏ –ë–î –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
‚îî‚îÄ utils/              # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
```

### üöÄ –°–µ—Ä–≤–∏—Å—ã (`services/`)
```
services/
‚îú‚îÄ api/                 # Backend API (FastAPI)
‚îÇ  ‚îú‚îÄ pyproject.toml   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ API
‚îÇ  ‚îú‚îÄ Dockerfile       # Docker –æ–±—Ä–∞–∑
‚îÇ  ‚îú‚îÄ app/            # –ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ  ‚îî‚îÄ tests/          # –¢–µ—Å—Ç—ã API
‚îú‚îÄ bot/                # Telegram Bot
‚îÇ  ‚îú‚îÄ pyproject.toml   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –±–æ—Ç–∞
‚îÇ  ‚îú‚îÄ Dockerfile       # Docker –æ–±—Ä–∞–∑
‚îÇ  ‚îú‚îÄ app/            # –ö–æ–¥ –±–æ—Ç–∞
‚îÇ  ‚îî‚îÄ tests/          # –¢–µ—Å—Ç—ã –±–æ—Ç–∞
‚îî‚îÄ analytics/          # –ë—É–¥—É—â–∏–π —Å–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
```

### üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (`tools/`)
```
tools/
‚îú‚îÄ prompt_tester.py     # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ –ë–ï–ó –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ prompt_playground.py # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø–µ—Å–æ—á–Ω–∏—Ü–∞
‚îú‚îÄ data_seeder.py      # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚îî‚îÄ dev_setup.py        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (`docs/`)
```
docs/
‚îú‚îÄ STRUCTURE.md         # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ DEVELOPMENT.md       # –ì–∞–π–¥ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
‚îú‚îÄ API.md              # API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ DEPLOYMENT.md       # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é
‚îî‚îÄ usecases/           # –ö–µ–π—Å—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

### üîß –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (`infra/`)
```
infra/
‚îú‚îÄ local/              # –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
‚îú‚îÄ staging/            # Staging –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îî‚îÄ production/         # Production –∫–æ–Ω—Ñ–∏–≥–∏
```

## –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### üéØ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤
- –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏–º–µ–µ—Ç —Å–≤–æ–π `pyproject.toml`
- –û—Ç–¥–µ–ª—å–Ω—ã–µ CI/CD –ø–∞–π–ø–ª–∞–π–Ω—ã
- –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ Docker –æ–±—Ä–∞–∑—ã
- –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### üîÑ –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **–ü—Ä–æ–º–ø—Ç—ã** —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ `shared/prompts/`
- **–ú–æ–¥–µ–ª–∏ –ë–î** —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `shared/database/`
- **–£—Ç–∏–ª–∏—Ç—ã** –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–∑ `shared/utils/`

### üß™ –£–¥–æ–±–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ü—Ä–æ–º–ø—Ç—ã**: `tools/prompt_tester.py` —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ
- **API**: –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ç–µ—Å—Ç—ã —Å —Ç–µ—Å—Ç–æ–≤–æ–π –ë–î
- **–ë–æ—Ç**: –º–æ–∫–∏ –¥–ª—è Telegram API

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
make setup-dev
```

### 2. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
make docker-up
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
```bash
make prompt-test
```

### 4. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
make test
```

## –†–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

### üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
1. **API**: —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `services/api/`
2. **Bot**: —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `services/bot/`
3. **–ü—Ä–æ–º–ø—Ç—ã**: —Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è –≤ `tools/prompt_playground.py`
4. **–ë–î**: –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ `shared/database/`

### üöÄ –î–µ–ø–ª–æ–π
1. **CI/CD** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. **Docker** –æ–±—Ä–∞–∑—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
3. **–û–∫—Ä—É–∂–µ–Ω–∏—è** –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `infra/`

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
```bash
# –ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–±–µ–∑ —Å–µ—Ä–≤–∏—Å–æ–≤)
python tools/prompt_tester.py

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø–µ—Å–æ—á–Ω–∏—Ü–∞
python tools/prompt_playground.py

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ CI
make prompt-test
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

1. –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ `services/new_service/`
2. –î–æ–±–∞–≤–∏—Ç—å `pyproject.toml` –∏ `Dockerfile`
3. –°–æ–∑–¥–∞—Ç—å CI –ø–∞–π–ø–ª–∞–π–Ω –≤ `.github/workflows/`
4. –û–±–Ω–æ–≤–∏—Ç—å `docker-compose.yml`
5. –î–æ–±–∞–≤–∏—Ç—å —Ü–µ–ª–∏ –≤ `Makefile`

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —ç—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

‚úÖ **–ü—Ä–æ—Å—Ç–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: –∫–∞–∂–¥—ã–π –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ —Å–≤–æ–µ–π —á–∞—Å—Ç—å—é  
‚úÖ **–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ä–µ–ª–∏–∑—ã**: –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ª–æ–º–∞—é—Ç –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã  
‚úÖ **–ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ø—Ä–æ–º–ø—Ç—ã —Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –ø–æ–¥–Ω—è—Ç–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤  
‚úÖ **–õ–µ–≥–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞**: `docker-compose up` –∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã  
‚úÖ **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ `shared/`  

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
make dev-install     # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make test           # –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
make lint           # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
make format         # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

# Docker
make docker-build   # –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
make docker-up      # –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
make docker-logs    # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
make db-upgrade     # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
make db-migration   # –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

# –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
make prompt-test    # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
make seed-data     # –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```
